<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8"/>
	<title>定时</title>
	<link rel="stylesheet" href="css/style_2.css"/> 
<link rel="stylesheet" href="css/swiper.min.css"/> 
<script type="text/javascript" src="js/jquery-2.1.3.js"></script>
<script type="text/javascript" src="js/swiper.min.js"></script>
<script type="text/javascript" src="js/apis.js" ></script>
<meta name="viewport" content="width=device-width,initial-scale=1.0, maximum-scale=1.0, user-scalable=0" />
</head>
<body>
<div class="basein">
	<div class="level0">
	<div class="dingshidiv">
		<div class="bg"></div>
		<div class="content">
			<div class="moshi">
				<ul>
					<li>
						<div class="bg" style="border-radius: 5px; opacity: 0.1; "></div>
						<div class="litxt">新风循环</div>
						<div class="btnke"><div class="bg" style="border-radius: 5px; opacity: 0.1; "></div>
						<div id="xinf" class="btn"></div>
						</div>
					</li>  
					<li>
						<div class="bg" style="border-radius: 5px; opacity: 0.1; "></div>
						<div class="litxt">热辅风</div>
						<div class="btnke">
							<div class="bg" style="border-radius: 5px; opacity: 0.1; "></div>
							<div id="djiaren" class="btn"></div>
						</div>
					</li>  
				</ul>  
			</div>
			<div class="changetime">
				<div class="op">
					<div class="btndiv">
						<div class="bg bg1" ></div>
						<div class="txt">开机</div>
					</div>
					<div class="btndiv">
						<div class="bg bg2" ></div>
						<div class="txt">关机</div>
					</div>
					<div class="btndiv on">
						<div class="bg bg3" ></div>
						<div class="txt">无</div>
					</div>
				</div>
				<div style="height:12px;"></div>
				<div class="chtime">
					<div class="bg" style="border-radius: 10px;opacity: 0.1;"></div>
					<div class="conent" >
						<div class="div1">
							<div class="line1">
								<div class="vert1"><div class="up"></div></div>
								<div class="vert2"></div>
								<div class="vert3"><div class="up"></div></div>
							</div>
							<div class="line2">
								<div class="vert1">
									<div class="swiper-container"  id="swiperchangehour">
										<ul  class="swiper-wrapper">
											<li class="swiper-slide">00</li>
											<li class="swiper-slide">01</li>
											<li class="swiper-slide">02</li>
											<li class="swiper-slide">03</li>
											<li class="swiper-slide">04</li>
											<li class="swiper-slide">05</li>
											<li class="swiper-slide">06</li>
											<li class="swiper-slide">07</li>
											<li class="swiper-slide">08</li>
											<li class="swiper-slide">09</li>
											<li class="swiper-slide">10</li>
											<li class="swiper-slide">11</li>	
											<li class="swiper-slide">12</li>	
											<li class="swiper-slide">13</li>	
											<li class="swiper-slide">14</li>	
											<li class="swiper-slide">15</li>	
											<li class="swiper-slide">16</li>	
											<li class="swiper-slide">17</li>	
											<li class="swiper-slide">18</li>	
											<li class="swiper-slide">19</li>	
											<li class="swiper-slide">20</li>	
											<li class="swiper-slide">21</li>	
											<li class="swiper-slide">22</li>	
											<li class="swiper-slide">23</li>	
										</ul>
									</div> 
								</div>
								<div class="vert2">
										<div class="fh">:</div>
								</div>
								<div class="vert3 ">
									<div class="swiper-container"  id="swiperchangemin">
										<ul  class="swiper-wrapper">
										<li class="swiper-slide">00</li>
										<li class="swiper-slide">01</li>
										<li class="swiper-slide">02</li>
										<li class="swiper-slide">03</li>
										<li class="swiper-slide">04</li>
										<li class="swiper-slide">05</li>
										<li class="swiper-slide">06</li>
										<li class="swiper-slide">07</li>
										<li class="swiper-slide">08</li>
										<li class="swiper-slide">09</li>
										<li class="swiper-slide">10</li>
										<li class="swiper-slide">11</li>
										<li class="swiper-slide">12</li>
										<li class="swiper-slide">13</li>
										<li class="swiper-slide">14</li>
										<li class="swiper-slide">15</li>
										<li class="swiper-slide">16</li>
										<li class="swiper-slide">17</li>
										<li class="swiper-slide">18</li>
										<li class="swiper-slide">19</li>
										<li class="swiper-slide">20</li>
										<li class="swiper-slide">21</li>
										<li class="swiper-slide">22</li>
										<li class="swiper-slide">23</li>
										<li class="swiper-slide">24</li>
										<li class="swiper-slide">25</li>
										<li class="swiper-slide">26</li>
										<li class="swiper-slide">27</li>
										<li class="swiper-slide">28</li>
										<li class="swiper-slide">29</li>
										<li class="swiper-slide">30</li>
										<li class="swiper-slide">31</li>
										<li class="swiper-slide">32</li>
										<li class="swiper-slide">33</li>
										<li class="swiper-slide">34</li>
										<li class="swiper-slide">35</li>
										<li class="swiper-slide">36</li>
										<li class="swiper-slide">37</li>
										<li class="swiper-slide">38</li>
										<li class="swiper-slide">39</li>
										<li class="swiper-slide">40</li>
										<li class="swiper-slide">41</li>
										<li class="swiper-slide">42</li>
										<li class="swiper-slide">43</li>
										<li class="swiper-slide">44</li>
										<li class="swiper-slide">45</li>
										<li class="swiper-slide">46</li>
										<li class="swiper-slide">47</li>
										<li class="swiper-slide">48</li>
										<li class="swiper-slide">49</li>
										<li class="swiper-slide">40</li>
										<li class="swiper-slide">51</li>
										<li class="swiper-slide">52</li>
										<li class="swiper-slide">53</li>
										<li class="swiper-slide">54</li>
										<li class="swiper-slide">55</li>
										<li class="swiper-slide">56</li>
										<li class="swiper-slide">57</li>
										<li class="swiper-slide">58</li>
										<li class="swiper-slide">59</li> 
									</ul>
									</div> 
								</div> 
							</div>
							<div class="line3">
								<div class="vert1"><div class="down"></div></div>
								<div class="vert2"></div>
								<div class="vert3"><div class="down"></div></div>
							</div>
						</div>
					</div>
				</div>
			</div>
			<div class="close" onclick="fixDingShiClose();"></div>
		</div>
	</div>
    </div>
</div>
<script type="text/javascript">
    var swiperchangehour, swiperchangemin,param
    function showType (ty) {
        if (ty == "xinf") {
            $(".changetime").hide();
            $(".dingshidiv,.moshi").show();
            if (param.xinf == "1"){
            		$("#xinf").addClass("on");
            }
            if (param.djiaren == "1"){
            		$("#djiaren").addClass("on");
            }
            
        } else {
            $(".moshi").hide();
            $(".dingshidiv,.changetime").show();
        } 
        $(".dingshidiv .moshi .btnke").click(function () {
            if ($(this).find(".btn").hasClass("on"))
                $(this).find(".btn").removeClass("on");
            else
                $(this).find(".btn").addClass("on");
        });
        $(".dingshidiv .changetime .btndiv").click(function () {
            $(".dingshidiv .changetime .btndiv").removeClass("on");
            $(this).addClass("on");
        });
        swiperchangehour = new Swiper('#swiperchangehour', {
            direction: 'vertical',
            longSwipesRatio: 0.2,
            resistanceRatio: 0,
            centeredSlides: true,
            slidesPerView: 3,
            loop: true,
            onTransitionEnd: function (swiper) {
                $("#swiperchangehour li").removeClass("on");
                $("#swiperchangehour li:eq(" + swiper.activeIndex + ")").addClass("on");
            }
        });
        swiperchangemin = new Swiper('#swiperchangemin', {
            direction: 'vertical',
            longSwipesRatio: 0.2,
            resistanceRatio: 0,
            centeredSlides: true,
            slidesPerView: 3,
            loop: true,
            onTransitionEnd: function (swiper, progress) {
                $("#swiperchangemin li").removeClass("on");
                $("#swiperchangemin li:eq(" + swiper.activeIndex + ")").addClass("on");
            }
        });

    };
    
    apiready=function () {
    		param = api.pageParam;
    		showType(param.ty)
    }

    function fixDingShiClose() {
        if ($(".changetime").css("display") == "block") {//时间选择
            var timeType =$api.trim($(".dingshidiv .changetime .op .on").text()); 
            valueText = $("#swiperchangehour li").eq(swiperchangehour.activeIndex).text() + ":" + $("#swiperchangemin li").eq(swiperchangemin.activeIndex).text();
            
            var $ds = $(".lblDingShi");
            var cmd = "timing-off";
            if (timeType == "开机") cmd = "timing-on";
            if (timeType == "无") valueText = "00:00";
            api.sendEvent({name:"setTiming",extra:{
            		cmd:cmd,
            		value:valueText
            }})
        } else {//循环模式选择
        		api.sendEvent({name:"setXinf",extra:{
        			xinf:$("#xinf").hasClass("on") ? "1" : "0",
        			djiaren:$("#djiaren").hasClass("on") ? "1" : "0"
        		}})
        }
        $api.closeFrame();
        //关闭页面
    } 

</script>
</body>
</html>